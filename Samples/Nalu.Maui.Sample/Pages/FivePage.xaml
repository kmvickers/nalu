<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:pageModels="clr-namespace:Nalu.Maui.Sample.PageModels"
             xmlns:nalu="https://nalu-development.github.com/nalu/layouts"
             x:Class="Nalu.Maui.Sample.Pages.FivePage"
             x:DataType="pageModels:FivePageModel"
             Title="Page Five">
    <ContentPage.Resources>
        <nalu:ConstraintLayoutScene x:Key="MyLayout">
            <nalu:Guideline Id="20pct" Percentage="0.2" />
            <nalu:Guideline Id="45pct" Percentage="0.45" Orientation="Horizontal" />

            <nalu:ViewConstraint Id="hello"
                                 LeftToLeftOf="20pct"
                                 TopToTopOf="parent"
                                 VerticalBias="0.15"
                                 BottomToBottomOf="parent" />
            <nalu:ViewConstraint Id="longtext"
                                 Width="*"
                                 LeftToLeftOf="hello | 16"
                                 RightToRightOf="parent | 32"
                                 TopToBottomOf="hello | 8"/>
            <nalu:ViewConstraint Id="nav"
                                 LeftToLeftOf="parent"
                                 RightToRightOf="parent"
                                 TopToBottomOf="longtext | 8"/>
            <nalu:ViewConstraint Id="count"
                                 LeftToLeftOf="parent"
                                 RightToRightOf="parent"
                                 BottomToBottomOf="parent"/>
            <nalu:ViewConstraint Id="b1"
                                 Width="2*"
                                 LeftToLeftOf="bg"
                                 RightToLeftOf="b2 | 4"
                                 TopToTopOf="45pct"/>
            <nalu:ViewConstraint Id="b2"
                                 Width="*"
                                 LeftToRightOf="b1 | 4"
                                 RightToLeftOf="b3 | 4"
                                 TopToTopOf="45pct"/>
            <nalu:ViewConstraint Id="b3"
                                 Width="*"
                                 LeftToRightOf="b2 | 4"
                                 RightToLeftOf="b4 | 4"
                                 TopToTopOf="45pct"/>
            <nalu:ViewConstraint Id="b4"
                                 Width="*"
                                 LeftToRightOf="b3 | 4"
                                 RightToRightOf="bg"
                                 TopToTopOf="45pct"/>
            <nalu:ViewConstraint Id="bg"
                                 Width="*"
                                 Height="*"
                                 LeftToLeftOf="parent | 16"
                                 RightToRightOf="parent | 16"
                                 BottomToBottomOf="parent | 24"
                                 TopToTopOf="parent | 16"/>
        </nalu:ConstraintLayoutScene>
    </ContentPage.Resources>
    <ContentPage.Content>
        <nalu:ConstraintLayout Scene="{StaticResource MyLayout}">
            <Border AutomationId="bg"
                    BackgroundColor="DeepSkyBlue"
                    StrokeShape="RoundRectangle 20"/>
            <Button AutomationId="hello"
                    Text="Hello world!" />
            <Label AutomationId="longtext"
                   LineBreakMode="WordWrap"
                   Text="This text might wrap when horizontal space is not enough" />
            <Button AutomationId="nav" Text="Navigate to /One/Three"
                    Command="{Binding GoToThreeCommand}" />
            <Button AutomationId="b1"
                    IsVisible="True"
                    Text="Btn1" />
            <Button AutomationId="b2"
                    IsVisible="True"
                    Text="Btn2" />
            <Button AutomationId="b3"
                    IsVisible="False"
                    Text="Btn3" />
            <Button AutomationId="b4"
                    IsVisible="True"
                    Text="Btn4" />
            <Label AutomationId="count">
                <Label.FormattedText>
                    <FormattedString>
                        <Span Text="Instance: "/>
                        <Span Text="{Binding InstanceCount}" />
                    </FormattedString>
                </Label.FormattedText>
            </Label>
        </nalu:ConstraintLayout>
    </ContentPage.Content>
</ContentPage>
